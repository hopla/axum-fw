<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<title>DICE Firmware API Documentation</title>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
		<link href="doxygen.css" rel="stylesheet" type="text/css">
	</head>
	<body>
		<table width="100%" border="0" cellspacing="0" cellpadding="0">
			<tr>
				<td><img src="images/tcat.gif" width="399" height="64"></td>
				<td align="right">DICE Firmware</td>
				<td align="right">Compiled on 8 Oct 2009</td>
			</tr>
		</table>
		<hr size="1">
	</body>
</html>
<!-- Generated by Doxygen 1.4.1 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>Bus Reset Interface<br>
<small>
[<a class="el" href="group___link_abstraction_layer.html">Link Abstraction Layer</a>]</small>
</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
Modules that need to be made aware of bus reset activity may install callbacks for bus reset indication and bus reset complete events using. 
<p>
<a class="el" href="group___bus_reset_interface.html#ga1">lalRegisterBRIndicationCallback()</a> <a class="el" href="group___bus_reset_interface.html#ga2">lalRegisterBRCompletionCallback()</a><p>
Indication callbacks are called once a valid bus reset has been detected.<p>
Complete callbacks are called after all bus reset processing is complete, which means the selfId's are verified, maps are completed, bus info blocks have been scanned, handles have been remapped to the correct node addresses, etc.
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">_TC_INLINE HRESULT&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___bus_reset_interface.html#ga7">lalElapsedTimeSinceResetCompletion</a> (uint32 *elapsedTime) _TC_INLINE_ALWAYS</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">_TC_INLINE HRESULT&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___bus_reset_interface.html#ga6">lalElapsedTimeSinceResetIndication</a> (uint32 *elapsedTime) _TC_INLINE_ALWAYS</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">_TC_INLINE HRESULT&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___bus_reset_interface.html#ga8">lalElapsedTimeSinceResetPreCompletion</a> (uint32 *elapsedTime) _TC_INLINE_ALWAYS</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">_TC_INLINE HRESULT&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___bus_reset_interface.html#ga0">lalGetBusGeneration</a> (uint32 *pCurBusGen) _TC_INLINE_ALWAYS</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the current bus generation.  <a href="#ga0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">_TC_INLINE HRESULT&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___bus_reset_interface.html#ga2">lalRegisterBRCompletionCallback</a> (<a class="el" href="group___link_abstraction_layer.html#ga1">lalBusResetCB</a> lalCBProc) _TC_INLINE_ALWAYS</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Registers a callback to be invoked when a bus reset has completed.  <a href="#ga2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">_TC_INLINE HRESULT&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___bus_reset_interface.html#ga1">lalRegisterBRIndicationCallback</a> (<a class="el" href="group___link_abstraction_layer.html#ga1">lalBusResetCB</a> lalCBProc) _TC_INLINE_ALWAYS</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Registers a callback to be invoked when a bus reset has begun.  <a href="#ga1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">_TC_INLINE HRESULT&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___bus_reset_interface.html#ga4">lalWaitOnResetCompletion</a> (BOOL *bResetDetected) _TC_INLINE_ALWAYS</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wait until bus reset processing has completed.  <a href="#ga4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">_TC_INLINE HRESULT&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___bus_reset_interface.html#ga3">lalWaitOnResetIndication</a> (BOOL *bResetDetected) _TC_INLINE_ALWAYS</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wait for a bus reset indication.  <a href="#ga3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">_TC_INLINE HRESULT&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___bus_reset_interface.html#ga5">lalWaitOnResetPreCompletion</a> (BOOL *bResetDetected) _TC_INLINE_ALWAYS</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">_TC_INLINE HRESULT&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___bus_reset_interface.html#ga10">lalWaitTimeSinceResetCompletion</a> (uint32 msec) _TC_INLINE_ALWAYS</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">_TC_INLINE HRESULT&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___bus_reset_interface.html#ga9">lalWaitTimeSinceResetIndication</a> (uint32 msec) _TC_INLINE_ALWAYS</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">_TC_INLINE HRESULT&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___bus_reset_interface.html#ga11">lalWaitTimeSinceResetPreCompletion</a> (uint32 msec) _TC_INLINE_ALWAYS</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="ga0" doxytag="lal.h::lalGetBusGeneration"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">_TC_INLINE HRESULT lalGetBusGeneration           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">uint32 *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pCurBusGen</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the current bus generation. 
<p>
This is the number of times the node has seen a bus reset since hardware reset. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pCurBusGen</em>&nbsp;</td><td>The memory address to place the current bus generation in. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>NO_ERROR (0) or an <a class="el" href="errorcodes.html">error code</a>. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga1" doxytag="lal.h::lalRegisterBRIndicationCallback"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">_TC_INLINE HRESULT lalRegisterBRIndicationCallback           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="group___link_abstraction_layer.html#ga1">lalBusResetCB</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lalCBProc</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Registers a callback to be invoked when a bus reset has begun. 
<p>
The callee must not depend on being called at any particular point in the reset process. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>lalCBProc</em>&nbsp;</td><td>The function to call. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>NO_ERROR (0) or an <a class="el" href="errorcodes.html">error code</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga2" doxytag="lal.h::lalRegisterBRCompletionCallback"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">_TC_INLINE HRESULT lalRegisterBRCompletionCallback           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="group___link_abstraction_layer.html#ga1">lalBusResetCB</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>lalCBProc</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Registers a callback to be invoked when a bus reset has completed. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>lalCBProc</em>&nbsp;</td><td>The function to call. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>NO_ERROR (0) or an <a class="el" href="errorcodes.html">error code</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga3" doxytag="lal.h::lalWaitOnResetIndication"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">_TC_INLINE HRESULT lalWaitOnResetIndication           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">BOOL *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>bResetDetected</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Wait for a bus reset indication. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ga4" doxytag="lal.h::lalWaitOnResetCompletion"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">_TC_INLINE HRESULT lalWaitOnResetCompletion           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">BOOL *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>bResetDetected</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Wait until bus reset processing has completed. 
<p>
If a bus reset is in progress, this function suspends the caller until the reset has been completely handled. If no reset is in progress, this function returns immediately. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>bResetDetected</em>&nbsp;</td><td>The memory address to indicate if a bus reset was in progress. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>NO_ERROR (0) or an <a class="el" href="errorcodes.html">error code</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga5" doxytag="lal.h::lalWaitOnResetPreCompletion"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">_TC_INLINE HRESULT lalWaitOnResetPreCompletion           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">BOOL *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>bResetDetected</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>bResetDetected</em>&nbsp;</td><td>
wait for a bus reset pre completion (before BM and handles - don't use handles at this stage) </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a class="anchor" name="ga6" doxytag="lal.h::lalElapsedTimeSinceResetIndication"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">_TC_INLINE HRESULT lalElapsedTimeSinceResetIndication           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">uint32 *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>elapsedTime</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>elapsedTime</em>&nbsp;</td><td>
time elapsed since last bus reset indication </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a class="anchor" name="ga7" doxytag="lal.h::lalElapsedTimeSinceResetCompletion"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">_TC_INLINE HRESULT lalElapsedTimeSinceResetCompletion           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">uint32 *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>elapsedTime</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>elapsedTime</em>&nbsp;</td><td>
time elapsed since last bus reset completion </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a class="anchor" name="ga8" doxytag="lal.h::lalElapsedTimeSinceResetPreCompletion"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">_TC_INLINE HRESULT lalElapsedTimeSinceResetPreCompletion           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">uint32 *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>elapsedTime</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>elapsedTime</em>&nbsp;</td><td>
time elapsed since last bus reset pre completion </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a class="anchor" name="ga9" doxytag="lal.h::lalWaitTimeSinceResetIndication"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">_TC_INLINE HRESULT lalWaitTimeSinceResetIndication           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">uint32&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>msec</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>msec</em>&nbsp;</td><td>
wait until msec has elapsed since the bus reset indication, or since another reset indications occurs </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a class="anchor" name="ga10" doxytag="lal.h::lalWaitTimeSinceResetCompletion"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">_TC_INLINE HRESULT lalWaitTimeSinceResetCompletion           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">uint32&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>msec</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>msec</em>&nbsp;</td><td>
wait until msec has elapsed since the bus reset completion, or since another reset completions occurs </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a class="anchor" name="ga11" doxytag="lal.h::lalWaitTimeSinceResetPreCompletion"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">_TC_INLINE HRESULT lalWaitTimeSinceResetPreCompletion           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">uint32&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>msec</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>msec</em>&nbsp;</td><td>
wait until msec has elapsed since the bus reset pre completion, or since another reset completions occurs </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<title>Untitled Document</title>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
		<link href="doxygen.css" rel="stylesheet" type="text/css">
	</head>
	<body>
		<hr size="1">
		<small>This confidential and proprietary software may be used only as authorised by 
			a licensing agreement from TC Applied Technologies, Ltd.
			<p>
			(C) COPYRIGHT 2007 TC Applied Technologies, Ltd. (ALL RIGHTS RESERVED) 
			Unauthorized use, duplication or distribution of this software is strictly 
			prohibited by law. </small></P>
	</body>
</html>
