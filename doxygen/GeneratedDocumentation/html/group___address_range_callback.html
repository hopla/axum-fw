<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<title>DICE Firmware API Documentation</title>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
		<link href="doxygen.css" rel="stylesheet" type="text/css">
	</head>
	<body>
		<table width="100%" border="0" cellspacing="0" cellpadding="0">
			<tr>
				<td><img src="images/tcat.gif" width="399" height="64"></td>
				<td align="right">DICE Firmware</td>
				<td align="right">Compiled on 8 Oct 2009</td>
			</tr>
		</table>
		<hr size="1">
	</body>
</html>
<!-- Generated by Doxygen 1.4.1 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>Address Range Callback Management<br>
<small>
[<a class="el" href="group___link_abstraction_layer.html">Link Abstraction Layer</a>]</small>
</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
Address Range Callbacks are used when another node issues a request to thisNode in an address range of interest to a module. 
<p>
Examples include:<p>
<ul>
<li>CSR Core Architecture</li><li>Serial Bus Management<ul>
<li>Bus Manager</li><li>Isochronous Resource Manager</li></ul>
</li><li>Configuration ROM</li><li>Connection Management Protocol</li><li>FCP Command and Response</li><li>Serial Bus Protocol 2 (SBP-2)</li><li>Asynchronous Connections</li></ul>
<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group___lock_handler.html">Lock Transaction Handler</a></dd></dl>
Registering a callback is done with:<p>
<a class="el" href="group___address_range_callback.html#ga1">lalAddressRangeRegisterCB()</a> <h2>Callbacks should not "block" </h2>
<p>
This means that a callback should normally put the packet block in a queue and return immediately and should not wait on any OS resource. This way, the packet is not handled in the thread of the lower layers. <h2>Sparse Ranges </h2>
<p>
Some protocols may be interested in a sparse set of ranges within a larger address range. For efficiency, the module that implements the protocol should allocate the entire range, where the range does not overlap with other module's needs of course. The callback may return an address error (see below) for addresses within the larger range that do not apply. This will cause the transaction layer to return the appropriate confirmation to the requester node. <h2>Callback return codes </h2>
<p>
The callback will be executed when a number of different types of requests happen in the allocated address space. These include read, write and lock requests. The module may handle any of these and shall use the enumerated response types defined by RCODE_1394 for return values. For instance, when the request type is handled and is successful, RESP_COMPLETE is returned. In the case of a sparsely implemented address range, the module may return RESP_ADDRESS_ERROR. In the case where a particular request type is not handled within the range, the module should return RESP_TYPE_ERROR, etc.
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">HRESULT&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___address_range_callback.html#ga0">lalAddressRangeInitialize</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize this module.  <a href="#ga0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">HRESULT&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___address_range_callback.html#ga1">lalAddressRangeRegisterCB</a> (<a class="el" href="group___link_abstraction_layer.html#ga2">LAL_CALLBACK</a> callback, OFFSET_1394 addressLow, OFFSET_1394 addressHi)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Register a callback for a specified address range.  <a href="#ga1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">HRESULT&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___address_range_callback.html#ga2">lalAddressRangeRemove</a> (OFFSET_1394 AddrStart, OFFSET_1394 AddrEnd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove a callback for a specified address range.  <a href="#ga2"></a><br></td></tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="ga0" doxytag="lalAddrRng.h::lalAddressRangeInitialize"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">HRESULT lalAddressRangeInitialize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialize this module. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ga1" doxytag="lalAddrRng.h::lalAddressRangeRegisterCB"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">HRESULT lalAddressRangeRegisterCB           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="group___link_abstraction_layer.html#ga2">LAL_CALLBACK</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>callback</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>OFFSET_1394&nbsp;</td>
          <td class="mdname" nowrap> <em>addressLow</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>OFFSET_1394&nbsp;</td>
          <td class="mdname" nowrap> <em>addressHi</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Register a callback for a specified address range. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>callback</em>&nbsp;</td><td>The callback to register. </td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group___link_abstraction_layer.html#ga2">LAL_CALLBACK</a> </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addressLow</em>&nbsp;</td><td>The start of the address range. </td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd>OFFSET_1394 </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addressHi</em>&nbsp;</td><td>The end of the address range. </td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd>OFFSET_1394 </dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>NO_ERROR (0) or an <a class="el" href="errorcodes.html">error code</a>. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga2" doxytag="lalAddrRng.h::lalAddressRangeRemove"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">HRESULT lalAddressRangeRemove           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OFFSET_1394&nbsp;</td>
          <td class="mdname" nowrap> <em>AddrStart</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>OFFSET_1394&nbsp;</td>
          <td class="mdname" nowrap> <em>AddrEnd</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Remove a callback for a specified address range. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addressLow</em>&nbsp;</td><td>The start of the address range. </td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd>OFFSET_1394 </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addressHi</em>&nbsp;</td><td>The end of the address range. </td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd>OFFSET_1394 </dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>NO_ERROR (0) or an <a class="el" href="errorcodes.html">error code</a>. </dd></dl>
    </td>
  </tr>
</table>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<title>Untitled Document</title>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
		<link href="doxygen.css" rel="stylesheet" type="text/css">
	</head>
	<body>
		<hr size="1">
		<small>This confidential and proprietary software may be used only as authorised by 
			a licensing agreement from TC Applied Technologies, Ltd.
			<p>
			(C) COPYRIGHT 2007 TC Applied Technologies, Ltd. (ALL RIGHTS RESERVED) 
			Unauthorized use, duplication or distribution of this software is strictly 
			prohibited by law. </small></P>
	</body>
</html>
